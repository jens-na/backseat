#!/usr/bin/env ruby

begin
  require 'backseat'
  require 'getoptlong'
  require 'yaml'
  require 'file'
rescue LoadError
  require 'rubygems'
  require 'backseat'
end

module Backseat

  check = false
  file = "/etc/backseat.yml"
  root = "/srv/backseat/"

  opts = GetoptLong.new(
    [ '--help', '-h', GetoptLong::NO_ARGUMENT ],
    [ '--file', '-f', GetoptLong::REQUIRED_ARGUMENT ],
    [ '--check', '-c', GetoptLong::NO_ARGUMENT ]
  )

  opts.each do |opt,arg|
    case opt
      when '--help'
        puts <<-EOF
Usage: backseat [OPTIONS]

-c, --check
  check the backups of all configured backup candidates

-f, --file
  an alternaive configuration file of backseat

-h, --help
  show help
  
        EOF
        exit 0
      when '--file'
        file = arg
      when '--check'
        check = true
    end
  end
  
config = Config.new(file)
begin
  config.check
rescue Exception => e
  puts e
  exit 1
end

cfg_obj = config.cfg


end
